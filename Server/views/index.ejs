<%- include('partials/header.ejs') -%>

    <body>
        <!-- assessment.ejs -->
        <main>
            <nav>
                <h1>Full-Stack Developer Assessment</h1>
                <ul class="info">
                    <li></li>
                    <li>Timer</li>
                    <button type="button" class="btn btn-info fs-6">Instructions</button>
                    <li><input class="btn btn-primary fs-6" type="submit" value="Submit"></li>
                </ul>

                <!-- <ul class="profile">
                    <li>Email: < % = userEmail % >
                    </li>
                    <li>Name: < %= userName % >
                    </li>
                </ul> -->
            </nav>

            <div class="exampannel">
                <!-- Question Card -->
                <section class="question-card">
                    <div class="question-header">
                        <h5>Question <%= currentIndex + 1 %> of <%= questions.length %>
                        </h5>
                    </div>

                    <div class="question-body">
                        <p>
                            <%= question.questionText %>
                        </p>

                        <form>
                            <% question.options.forEach((opt, idx)=> { %>
                                <div class="option">
                                    <input type="radio" name="q<%= currentIndex + 1 %>" id="opt<%= idx %>" <%=answers &&
                                        answers[question._id]===opt ? 'checked' : '' %>
                                    >
                                    <label for="opt<%= idx %>">
                                        <%= opt %>
                                    </label>
                                </div>
                                <% }) %>
                        </form>
                    </div>

                    <div class="question-footer">
                        <% if (currentIndex> 0) { %>
                            <a href="/assessment/<%= currentIndex - 1 %>" class="btn btn-secondary">Previous</a>
                            <% } %>
                                <% if (currentIndex < questions.length - 1) { %>
                                    <a href="/assessment/<%= currentIndex + 1 %>" class="btn btn-primary">Next</a>
                                    <% } %>
                    </div>
                </section>

                <!-- Question Navigation -->
                <aside class="question-nav">
                    <h6>Question Navigation</h6>
                    <div class="question-buttons">
                        <% questions.forEach((qid, i)=> { %>
                            <a href="/assessment/<%= i %>" class="q-btn <%= currentIndex === i ? 'active' : '' %>">
                                <%= i + 1 %>
                            </a>
                            <% }) %>
                    </div>
                </aside>
            </div>
        </main>

        <%- include('partials/footer.ejs') %>
    </body>

    </html>